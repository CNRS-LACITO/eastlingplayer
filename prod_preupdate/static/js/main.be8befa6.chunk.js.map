{"version":3,"sources":["Components/DisplayOptions.js","Components/Player.js","Components/Picture.js","Components/Note.js","Components/Morpheme.js","Components/PlayButton.js","Components/Word.js","Components/Sentence.js","Components/Annotations.js","App.js","serviceWorker.js","translation.js","index.js"],"names":["DisplayOptions","props","state","textTranscriptions","displayOptions","length","textTranslations","sentenceTranscriptions","options","sentence","transcriptions","sentenceTranslations","translations","wordTranscriptions","wordTranslations","morphemeTranscriptions","morphemeTranslations","displayNotes","notes","lang","mode","continuousPlay","params","URLSearchParams","window","location","search","set","this","join","newUrl","protocol","host","pathname","toString","history","pushState","event","target","name","inputName","split","s","checkedTranscriptions","console","log","transName","index","indexOf","splice","document","querySelectorAll","forEach","e","style","display","push","isWordList","setState","buildUrl","checkedTranslations","checkedNotes","checked","text","FormGroup","row","className","hidden","FormControlLabel","key","labelPlacement","control","Checkbox","onChange","handleCheck","bind","label","Divider","FormLabel","component","map","transc","includes","handleTranscriptionOptions","transl","handleTranslationOptions","word","morpheme","note","nl","handleNotesOptions","React","Component","Player","createElement","type","innerHTML","scriptStr","instance","appendChild","highlight","id","border","querySelector","updatePosition","time","t","timeList","find","start","end","undefined","currentAnchor","currentSentence","getElementById","classList","remove","add","Event","dispatchEvent","scrollIntoView","block","w","playerIsLoaded","mediaElement","audioStyle","file","ref","audio","controls","preload","src","url","video","el","Picture","c","onmouseover","attributes","wordid","nodeValue","coords","area","image_scope","image_width","usemap","sentenceId","cssBGPosition","imgStyle","class","position","textAlign","alt","imageSrc","width","height","canvas","Note","Morpheme","handleClick","anchorEl","currentTarget","open","handleClose","idNote","currentTime","AUDIO","play","pause","node","notesJSON","NOTE","message","f","isGlossIncluded","thisClassName","TRANSL","Typography","variant","visibility","getNotes","n","FORM","kindOf","hasOwnProperty","wID","words","IconButton","color","aria-label","onClick","playSentence","PlayArrow","pauseSentence","Pause","PlayButton","showPlayPause","displayPlay","paused","duration","addEventListener","player","getElementsByName","setTimeout","playPause","Word","isNaN","styleCombined","Boolean","popperId","tableBordered","visible","invisible","tableBorderedVisible","tableBorderedInvisible","availableOptions","found","morphemes","M","m","aria-describedby","sID","Popper","test","doi","Fragment","onMouseOver","Sentence","who","AREA","delta_x","delta_y","W","Array","isArray","divWord","canvasStyle","title","click","avatarStyle","blue","Card","CardContent","Avatar","Annotations","isLoaded","annotationData","trackTest","trackTranscription","trackTranslation","annotationItems","wholeTranscriptions","wholeTranslations","textTracks","getTrackById","annotations","TEXT","sentences","S","WORDLIST","wordlist","a","image","images","i","doiSentenceUrl","cues","transcSubtitle","translSubtitle","cueStart","cueEnd","cueTransc","VTTCue","cueTransl","size","line","addCue","doiWordUrl","Container","fixed","extensionFile","data","urlFile","replace","format","parserUrl","App","hasPrimaryId","hasSecondaryId","isMediaLoaded","isAnnotationsLoaded","hasMediaError","mediaError","hasAnnotationsError","annotationsError","METADATA","MEDIAFILE","langOptions","playerLoaded","sVar","unescape","RegExp","escape","oai_primary","getUrlParameter","oai_secondary","optionTextTranscriptions","optionTextTranslations","optionSentenceTranscriptions","optionSentenceTranslations","optionWordTranscriptions","optionWordTranslations","optionMorphemeTranscriptions","optionMorphemeTranslations","optionNotes","optionLang","optionMode","optionContinuousPlay","anchor","hash","fetch","then","res","json","result","mediaType","mediaUrl","metadata","error","langues","typeOf","from","code","CircularProgress","hostname","match","ReactDOM","render","StrictMode","language","translation","en","fr","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.be8befa6.chunk.js","sourcesContent":["import React from 'react';\r\nimport { FormGroup, FormControlLabel, FormLabel, Checkbox, Switch, Divider  } from '@material-ui/core';\r\nimport { Translate } from 'react-translated';\r\n\r\nclass DisplayOptions extends React.Component {\r\n\r\n  constructor(props) {\r\n    \r\n    super(props);\r\n\r\n    this.state = {\r\n        //#41 words : this.props.displayOptions.words,\r\n        textTranscriptions: (this.props.displayOptions.textTranscriptions.length > 0) ? this.props.displayOptions.textTranscriptions:[],\r\n        textTranslations: (this.props.displayOptions.textTranslations.length > 0) ? this.props.displayOptions.textTranslations:[],\r\n        sentenceTranscriptions: (this.props.displayOptions.sentenceTranscriptions.length > 0) ? this.props.displayOptions.sentenceTranscriptions:[this.props.options.sentence.transcriptions[0]],\r\n        sentenceTranslations: (this.props.displayOptions.sentenceTranslations.length > 0) ? this.props.displayOptions.sentenceTranslations:[this.props.options.sentence.translations[0]],\r\n        wordTranscriptions: (this.props.displayOptions.wordTranscriptions.length > 0) ? this.props.displayOptions.wordTranscriptions:[],\r\n        wordTranslations: (this.props.displayOptions.wordTranslations.length > 0) ? this.props.displayOptions.wordTranslations:[],\r\n        morphemeTranscriptions: (this.props.displayOptions.morphemeTranscriptions.length > 0) ? this.props.displayOptions.morphemeTranscriptions:[],\r\n        morphemeTranslations: (this.props.displayOptions.morphemeTranslations.length > 0) ? this.props.displayOptions.morphemeTranslations:[],\r\n        displayNotes: this.props.displayOptions.notes,\r\n        options:this.props.options,\r\n        lang:this.props.displayOptions.lang,\r\n        mode:this.props.displayOptions.mode,\r\n        continuousPlay:this.props.displayOptions.continuousPlay,\r\n    };\r\n\r\n  }\r\n\r\n\r\n  buildUrl(){\r\n      var params = new URLSearchParams(window.location.search);\r\n      params.set('optionTextTranscriptions',this.state.textTranscriptions.join('+'));\r\n      params.set('optionTextTranslations',this.state.textTranslations.join('+'));\r\n      params.set('optionSentenceTranscriptions',this.state.sentenceTranscriptions.join('+'));\r\n      params.set('optionSentenceTranslations',this.state.sentenceTranslations.join('+'));\r\n      params.set('optionWordTranscriptions',this.state.wordTranscriptions.join('+'));\r\n      params.set('optionWordTranslations',this.state.wordTranslations.join('+'));\r\n      params.set('optionMorphemeTranscriptions',this.state.morphemeTranscriptions.join('+'));\r\n      params.set('optionMorphemeTranslations',this.state.morphemeTranslations.join('+'));\r\n      params.set('optionNotes',this.state.displayNotes.join('+'));\r\n      //#41 params.set('optionWords',this.state.words);\r\n      params.set('lang',this.state.lang);\r\n      params.set('mode',this.state.mode);\r\n      params.set('continuousPlay',this.state.continuousPlay);\r\n\r\n      var newUrl = window.location.protocol + \"//\" + window.location.host + window.location.pathname + \"?\" + params.toString();\r\n\r\n      window.history.pushState('test','',newUrl);\r\n  }\r\n\r\n\r\n  handleTranscriptionOptions(event){\r\n\r\n    if(event.target.name.length >0 ){\r\n      var inputName = event.target.name.split('-');\r\n      var s = [inputName[0]]+\"Transcriptions\";\r\n      var checkedTranscriptions = this.state[[inputName[0]]+\"Transcriptions\"];\r\n      \r\n      console.log(s);\r\n\r\n      //transName is used because some kindOf or Translation type can contain \"-\" character\r\n      var transName = event.target.name.split(inputName[0]+'-');\r\n\r\n      const index = checkedTranscriptions.indexOf(transName[1]);\r\n\r\n      if (index > -1) {\r\n        //if the transcription is disabled\r\n        checkedTranscriptions.splice(index, 1);\r\n        console.log(checkedTranscriptions);\r\n        console.log(this.state);\r\n\r\n        document.querySelectorAll('.transcription.'+event.target.name).forEach(\r\n          function(e){\r\n            e.style.display='none';\r\n          });\r\n\r\n      }else{\r\n        checkedTranscriptions.push(transName[1]);\r\n        var isWordList = this.props.isWordList;\r\n        document.querySelectorAll('.transcription.'+event.target.name).forEach(\r\n          function(e){\r\n            e.style.display=(isWordList)?'table-cell':'block';\r\n          });\r\n      }\r\n\r\n/////////////////////\r\n      this.setState({\r\n        [inputName[0]+'Transcriptions']: checkedTranscriptions,\r\n        \"options\" : this.state.options\r\n      },this.buildUrl());\r\n\r\n      console.log(this.state);\r\n\r\n    }\r\n    \r\n  }\r\n\r\n  handleTranslationOptions(event){\r\n    if(event.target.name.length >0 ){\r\n      var inputName = event.target.name.split('-');\r\n      var checkedTranslations = this.state[[inputName[0]]+\"Translations\"];\r\n\r\n\r\n      var transName = event.target.name.split(inputName[0]+'-');\r\n\r\n      \r\n      const index = checkedTranslations.indexOf(transName[1]);\r\n      if (index > -1) {\r\n        checkedTranslations.splice(index, 1);\r\n        document.querySelectorAll('.translation.'+event.target.name).forEach(\r\n          function(e){\r\n            e.style.display='none';\r\n\r\n          });\r\n      }else{\r\n        checkedTranslations.push(transName[1]);\r\n        var isWordList = this.props.isWordList;\r\n        document.querySelectorAll('.translation.'+event.target.name).forEach(\r\n          function(e){\r\n            e.style.display=(isWordList)?'table-cell':'block';\r\n          });\r\n      }\r\n\r\n      this.setState({[inputName[0]+'Translations']: checkedTranslations},this.buildUrl());\r\n\r\n    }\r\n    \r\n  }\r\n\r\n  handleNotesOptions(event){\r\n    if(event.target.name.length >0 ){\r\n      var checkedNotes = this.state.displayNotes;\r\n\r\n      const index = checkedNotes.indexOf(event.target.name);\r\n      if (index > -1) {\r\n        checkedNotes.splice(index, 1);\r\n        document.querySelectorAll('.note.'+event.target.name).forEach(\r\n          function(e){\r\n            e.style.display='none';\r\n          });\r\n      }else{\r\n        checkedNotes.push(event.target.name);\r\n        document.querySelectorAll('.note.'+event.target.name).forEach(\r\n          function(e){\r\n            e.style.display='block';\r\n          });\r\n        document.querySelectorAll('sup.note.'+event.target.name).forEach(\r\n          function(e){\r\n            e.style.display='inline-block';\r\n          });\r\n      }\r\n\r\n      this.setState({displayNotes: checkedNotes},this.buildUrl());\r\n\r\n    }\r\n    \r\n  }\r\n\r\n  handleCheck(event){\r\n    if(event.target.name.length >0 ){\r\n\r\n      this.setState({[event.target.name]: event.target.checked},this.buildUrl());\r\n\r\n    }\r\n    \r\n  }\r\n\r\n  render() {\r\n    this.buildUrl();\r\n\r\n    return (\r\n      <div>\r\n        <h2><Translate text='Display options'/></h2>\r\n        \r\n        <FormGroup row>\r\n          <div className=\"optionContinuousPlay\" hidden={this.state.continuousPlay.length===0}>\r\n            <FormControlLabel \r\n              key={\"continuousPlay\"} \r\n              labelPlacement=\"start\"\r\n              control={<Checkbox checked={this.state.continuousPlay===true} onChange={this.handleCheck.bind(this)} name=\"continuousPlay\" />}\r\n              label={<Translate text='Continuous play'/>}\r\n            />\r\n          </div>\r\n        </FormGroup>\r\n\r\n        <Divider></Divider>\r\n        \r\n        <FormGroup row>\r\n        \r\n        <div className=\"optionTransc\" hidden={this.state.options.text.transcriptions.length===0}>\r\n          <FormLabel component=\"legend\"><Translate text='Text transcription'/></FormLabel>\r\n          <FormGroup>\r\n          {this.state.options.text.transcriptions.map(transc => (\r\n            <FormControlLabel key={\"textTranscription\"+transc}\r\n              control={<Checkbox checked={this.state.textTranscriptions.includes(transc)} onChange={this.handleTranscriptionOptions.bind(this)} name={\"text-\"+transc} />}\r\n              label={transc}\r\n            />\r\n          ))}\r\n          </FormGroup>\r\n        </div>\r\n\r\n        <div className=\"optionTransl\" hidden={this.state.options.text.translations.length===0}>\r\n          <FormLabel component=\"legend\"><Translate text='Text translation'/></FormLabel>\r\n          <FormGroup>\r\n          {this.state.options.text.translations.map(transl => (\r\n            <FormControlLabel key={\"textTranslation\"+transl}\r\n              control={<Checkbox checked={this.state.textTranslations.includes(transl)} onChange={this.handleTranslationOptions.bind(this)} name={\"text-\"+transl} />}\r\n              label={transl}\r\n            />\r\n          ))}\r\n          </FormGroup>\r\n        </div>\r\n\r\n        <div className=\"optionTransc\" hidden={this.state.options.sentence.transcriptions.length===0}>\r\n          <FormLabel component=\"legend\"><Translate text='Sentence transcription'/></FormLabel>\r\n          <FormGroup>\r\n          {this.state.options.sentence.transcriptions.map(transc => (\r\n            <FormControlLabel key={\"sentenceTranscription\"+transc}\r\n              control={<Checkbox checked={this.state.sentenceTranscriptions.includes(transc)} onChange={this.handleTranscriptionOptions.bind(this)} name={\"sentence-\"+transc} />}\r\n              label={transc}\r\n            />\r\n          ))}\r\n          </FormGroup>\r\n        </div>\r\n\r\n        <div className=\"optionTransl\" hidden={this.state.options.sentence.translations.length===0}>\r\n          <FormLabel component=\"legend\"><Translate text='Sentence translation'/></FormLabel>\r\n          <FormGroup>\r\n          {this.state.options.sentence.translations.map(transl => (\r\n            <FormControlLabel key={\"textTranslation\"+transl}\r\n              control={<Checkbox checked={this.state.sentenceTranslations.includes(transl)} onChange={this.handleTranslationOptions.bind(this)} name={\"sentence-\"+transl} />}\r\n              label={transl}\r\n            />\r\n          ))}\r\n          </FormGroup>\r\n        </div>\r\n\r\n        <div className=\"optionTransc\" hidden={this.state.options.word.transcriptions.length===0} >\r\n          <FormLabel component=\"legend\"><Translate text='Word transcription'/></FormLabel>\r\n          <FormGroup>\r\n          {this.state.options.word.transcriptions.map(transc => (\r\n            <FormControlLabel key={\"wordTranscription\"+transc}\r\n              control={<Checkbox checked={this.state.wordTranscriptions.includes(transc)} onChange={this.handleTranscriptionOptions.bind(this)} name={\"word-\"+transc} />}\r\n              label={transc}\r\n            />\r\n          ))}\r\n          </FormGroup>\r\n        </div>\r\n\r\n        <div className=\"optionTransl\" hidden={this.state.options.word.translations.length===0}>\r\n          <FormLabel component=\"legend\"><Translate text='Word translation'/></FormLabel>\r\n          <FormGroup>\r\n          {this.state.options.word.translations.map(transl => (\r\n            <FormControlLabel key={\"wordTranslation\"+transl}\r\n              control={<Checkbox checked={this.state.wordTranslations.includes(transl)} onChange={this.handleTranslationOptions.bind(this)} name={\"word-\"+transl} />}\r\n              label={transl}\r\n            />\r\n          ))}\r\n          </FormGroup>\r\n        </div>\r\n\r\n        <div className=\"optionTransc\" hidden={this.state.options.morpheme.transcriptions.length===0}>\r\n          <FormLabel component=\"legend\"><Translate text='Morpheme transcription'/></FormLabel>\r\n          <FormGroup>\r\n          {this.state.options.morpheme.transcriptions.map(transc => (\r\n            <FormControlLabel key={\"morphemeTranscription\"+transc}\r\n              control={<Checkbox checked={this.state.morphemeTranscriptions.includes(transc)} onChange={this.handleTranscriptionOptions.bind(this)} name={\"morpheme-\"+transc} />}\r\n              label={transc}\r\n            />\r\n          ))}\r\n          </FormGroup>\r\n        </div>\r\n\r\n        <div className=\"optionTransl\" hidden={this.state.options.morpheme.translations.length===0}>\r\n          <FormLabel component=\"legend\"><Translate text='Morpheme translation'/></FormLabel>\r\n          <FormGroup>\r\n          {this.state.options.morpheme.translations.map(transl => (\r\n            <FormControlLabel key={\"morphemeTranslation\"+transl}\r\n              control={<Checkbox checked={this.state.morphemeTranslations.includes(transl)} onChange={this.handleTranslationOptions.bind(this)} name={\"morpheme-\"+transl} />}\r\n              label={transl}\r\n            />\r\n          ))}\r\n          </FormGroup>\r\n        </div>                  \r\n\r\n        <div className=\"optionNotes\" hidden={this.state.options.note.translations.length===0}>\r\n          <FormLabel component=\"legend\">Notes</FormLabel>\r\n          <FormGroup>\r\n            {this.state.options.note.translations.map(nl => (\r\n              <FormControlLabel key={\"note\"+nl}\r\n                control={<Checkbox checked={this.state.displayNotes.includes(nl)} onChange={this.handleNotesOptions.bind(this)} name={nl} />}\r\n                label={nl}\r\n              />\r\n            ))}\r\n          </FormGroup>\r\n        </div>\r\n\r\n        </FormGroup>\r\n\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DisplayOptions;","import React from 'react';\r\n\r\n\r\nclass Player extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n    componentDidMount() {\r\n\r\n\t    const s = document.createElement('script');\r\n\t    \r\n\t    s.type = 'text/javascript';\r\n\r\n\t    var scriptStr = \"var wordidList=[];var startTimeList=[];var endTimeList=[];var timeList=[];\"\r\n\t\tscriptStr +=\"document.getElementById('player').ontimeupdate=function(){updatePosition(this.currentTime)};\";\r\n\r\n\t    s.innerHTML = scriptStr;\r\n\t    this.instance.appendChild(s);\r\n\r\n\t    //Mise en lumière du mot sur l'image\r\n\t    window.highlight=function highlight(id,type){\r\n\r\n\t      if(type!==\"S\"){\r\n\r\n\t        document.querySelectorAll('canvas:not([wordid=\"\"]').forEach(e => { \r\n\t                  e.style.border='none'; \r\n\t                });\r\n\t        document.querySelectorAll('[wordid=\"'+id+'\"]').forEach(e => { \r\n\t                  e.style.border='solid'; \r\n\t                });\r\n\r\n\t        document.querySelectorAll('.WORD').forEach(e => { \r\n\t                  e.style.border='none'; \r\n\t                });\r\n\r\n\t        document.querySelector('#'+id).style.border='solid';\r\n\t      }\r\n\r\n\t    };\r\n\r\n\r\n\t    window.updatePosition=function updatePosition(time){\r\n\r\n\t\t    var t = window.timeList.find((e)=>(e.start < time && e.end > time));\r\n\r\n\t\t    if(t !== undefined){\r\n\t\t    \tvar currentAnchor = (!window.isWordList)?t.sentence:t.word;\r\n\r\n\t            if(window.currentSentence !== currentAnchor){ \r\n\t              if(window.currentSentence !== undefined) \r\n\t                document.getElementById(window.currentSentence).classList.remove(\"currentSentence\");\r\n\t              \r\n\t              if(currentAnchor){\r\n\t                document.getElementById(currentAnchor).classList.add(\"currentSentence\");\r\n\t                window.currentSentence = currentAnchor;\r\n\t                let event = new Event(\"sentence-changed\");\r\n\t                document.dispatchEvent(event);\r\n\t                //window.scrollTo(0,document.getElementById(currentAnchor).offsetTop - 150);\r\n\t                document.getElementById(currentAnchor).scrollIntoView({block: \"center\"});\r\n\t              }\r\n\t            }\r\n\t\t    }\r\n\r\n\t\t    var w = window.timeList.find((e)=>(e.start < time && e.end > time && e.type !== \"S\"));\r\n\t\t    \r\n\t            if((w !== undefined) && !window.isWordList){\r\n\t                //console.log(\"highlight\");\r\n\t              \twindow.highlight(w.morpheme ?? w.word,w.type);  \r\n\t         }\r\n\r\n\t\t};\r\n\r\n\t\tthis.props.playerIsLoaded();\r\n\t}\r\n\t\r\n  render(){\r\n    const audioStyle = {\r\n          'width': '80%',\r\n        };\r\n    var mediaElement;\r\n\r\n    if(this.props.file.type === \"audio\"){\r\n      mediaElement = <audio ref={audio => (this.audio = audio)} id=\"player\" controls preload='auto' style={audioStyle}>\r\n          <source src={this.props.file.url} type=\"audio/mpeg\" />\r\n          <track label=\"Transcription & Translation\" id=\"test\" />\r\n          <track label=\"Transcription\" id=\"trackTranscription\" />\r\n          <track label=\"Translation\" id=\"trackTranslation\" />\r\n          \r\n\r\n        Your browser does not support the\r\n            <code>audio</code> element.</audio>;\r\n    }else{\r\n      mediaElement = <video ref={video => (this.video = video)} id=\"player\" controls preload='auto' style={audioStyle}>\r\n          <source src={this.props.file.url} type=\"video/mp4\" />\r\n          <track label=\"Transcription & Translation\" id=\"test\" />\r\n          <track label=\"Transcription\" id=\"trackTranscription\" />\r\n          <track label=\"Translation\" id=\"trackTranslation\" />\r\n          \r\n           \r\n        Your browser does not support the\r\n            <code>video</code> element.</video>;\r\n    }\r\n    return (\r\n      <div ref={el => (this.instance = el)}>\r\n        {mediaElement}\r\n      </div>\r\n        \r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default Player;","import React from 'react';\r\n\r\nclass Picture extends React.Component {\r\n\r\n  componentDidMount(){\r\n    document.querySelectorAll('.pictureBlock canvas').forEach(c=>{\r\n      c.onmouseover=function(){\r\n        window.highlight(this.attributes.wordid.nodeValue,\"W\");\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n        //var url_image = this.props.imageSrc;\r\n        var coords = this.props.area.coords.split(',');\r\n\r\n        var image_scope = coords[3]-coords[1];\r\n        var image_width = coords[2]-coords[0];\r\n        //var image_bottom = 0;\r\n        //var image_bottom = parseInt(coords[1]); \r\n        var usemap =\"#map_\" + this.props.sentenceId;\r\n\r\n       var delta_x = coords[0];\r\n       var delta_y = coords[1];\r\n       \r\n       var cssBGPosition = '-' + delta_x + 'px -' + delta_y + 'px';    \r\n       //var cssBG ='url('+url_image+') -' + delta_x + 'px -' + delta_y + 'px';\r\n       \r\n        //const wordsAreas = [];\r\n        const imgStyle = {\r\n          'background-position': cssBGPosition,\r\n          'width': image_width + 'px',\r\n          'height': image_scope + 'px',\r\n          'padding': '0px',\r\n          'border': '0px',\r\n          'object-fit': 'none',\r\n          'object-position':cssBGPosition,\r\n          'max-width' : 'inherit !important'\r\n        };\r\n\r\n\r\n    return (\r\n          <div class=\"pictureBlock\">\r\n          <div sentenceId={this.props.sentenceId} style={{position:'relative',textAlign:'initial'}}>\r\n           <img alt={this.props.imageSrc} src={this.props.imageSrc} style={imgStyle} width={image_width} height={image_scope} usemap={usemap} />\r\n           <div>\r\n           {this.props.canvas}\r\n           </div>\r\n             \r\n            </div>\r\n          </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Picture;","import React from 'react';\r\n\r\nclass Note extends React.Component {\r\n\r\n  render() {\r\n\r\n    return (\r\n          <div class={`note ${this.props.lang}`} hidden={this.props.hidden} >\r\n          <span class='circle'>\r\n            {this.props.id}\r\n          </span>\r\n          {this.props.note}\r\n          </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Note;","import React from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { PlayArrow, Pause } from '@material-ui/icons';\r\nimport Note from './Note';\r\n\r\n\r\nclass Morpheme extends React.Component {\r\n\tconstructor(props) {\r\n\t    super(props);\r\n\t    this.state = {\r\n\t      anchorEl: null,\r\n          open: false\r\n\t    };\r\n      this.idNote = this.props.idNote - 1 ?? 1;\r\n\t}\r\n\r\n  playSentence(){\r\n    document.getElementById('player').currentTime = this.props.w.AUDIO.start;\r\n    document.getElementById('player').play();\r\n  }\r\n\r\n  pauseSentence(){\r\n    document.getElementById('player').pause();\r\n  }\r\n\r\n  handleClick = (event) => {\r\n    //console.log(event.currentTarget);\r\n    this.setState({\r\n      anchorEl: event.currentTarget,\r\n      open: true\r\n    });\r\n\r\n    if(event.currentTarget.id.length>0){\r\n      document.querySelectorAll('canvas').forEach((c)=>c.style.border=\"none\");\r\n      document.querySelector('[wordid=\"'+event.currentTarget.id+'\"]').style.border='solid';\r\n    }\r\n      };\r\n\r\n  handleClose = () => {\r\n    this.setState({\r\n      anchorEl: null,\r\n      open: false\r\n    });\r\n    document.querySelectorAll('canvas').forEach((c)=>c.style.border=\"none\");\r\n  };\r\n\r\n  getNotes(node,notesJSON){\r\n    if(node.NOTE !== undefined && node.NOTE !== null){\r\n      if(node.NOTE.length === undefined){\r\n          notesJSON.push({\"id\":this.idNote,\"note\": node.NOTE.message + node.NOTE.text,\"hidden\" : !this.props.displayOptions.notes.includes(node.NOTE['xml:lang']),lang:node.NOTE[\"xml:lang\"]});\r\n          this.idNote++;\r\n      }else{\r\n        node.NOTE.forEach((f) => {\r\n            notesJSON.push({\"id\":this.idNote,\"note\": f.message + f.text,\"hidden\" :!this.props.displayOptions.notes.includes(f['xml:lang']), lang:f[\"xml:lang\"]});\r\n            this.idNote++;\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n  \tlet word = \"\";\r\n    const transcriptions = [];\r\n  \tconst translations = [];\r\n    const notes = [];\r\n    const notesJSON = [];\r\n\r\n\r\n\r\n    //cas où une seule balise FORM est trouvé=>converti en objet et pas en tableau\r\n    //<div style={{display:'table-cell'}}>\r\n    var isGlossIncluded = false;\r\n    var thisClassName = '';\r\n\r\n    if(this.props.w.TRANSL !== undefined && this.props.w.TRANSL !== null){\r\n\t    if(this.props.w.TRANSL.length === undefined){\r\n        isGlossIncluded = this.props.displayOptions.morphemeTranslations.includes(this.props.w.TRANSL[\"xml:lang\"]);\r\n        thisClassName = (this.props.isWordList === true)?'wordlistWord':'morpheme';\r\n\r\n\t      translations.push(\r\n\t              <Typography variant=\"body2\" component={this.props.isWordList === true ? 'div':'p'} style={!isGlossIncluded?{display:'none'}:{visibility:'inherit'}} className={`translation ${thisClassName} morpheme-${this.props.w.TRANSL['xml:lang']}`}>\r\n\t                {this.props.w.TRANSL.text}\r\n\t              </Typography>\r\n\t            );\r\n\t    }else{\r\n\t      this.props.w.TRANSL.forEach((t) => {\r\n            isGlossIncluded = this.props.displayOptions.morphemeTranslations.includes(t[\"xml:lang\"]);\r\n            thisClassName = (this.props.isWordList === true)?'wordlistWord':'morpheme';\r\n\r\n\t          translations.push(\r\n\t              <Typography variant=\"body2\" component={this.props.isWordList === true ? 'div':'p'} style={!isGlossIncluded?{display:'none'}:{visibility:'inherit'}}  className={`translation ${thisClassName} morpheme-${t['xml:lang']}`}>\r\n\t                {t.text}\r\n\t              </Typography>\r\n\t            );\r\n\t        });\r\n\t    }\r\n    }\r\n\r\n  // Get note(s) of the sentence\r\n  /*\r\n  if(this.props.w.NOTE != undefined && this.props.w.NOTE !== null){\r\n    if(this.props.w.NOTE.length == undefined){\r\n      notes.push(\r\n              <Typography variant=\"body2\" component=\"p\" className={`note ${this.props.w.NOTE['xml:lang']}`}>\r\n                {this.props.w.NOTE.message} {this.props.w.NOTE.text}\r\n              </Typography>\r\n            );\r\n    }else{\r\n      this.props.w.NOTE.forEach((f) => {\r\n          notes.push(\r\n              <Typography variant=\"body2\" component=\"p\" className={`note ${f['xml:lang']}`}>\r\n                {f.message} {f.text}\r\n              </Typography>\r\n            );\r\n        });\r\n    }\r\n  }\r\n*/\r\n\r\n  // Get note(s) of the morpheme\r\n  this.getNotes(this.props.w,notesJSON);\r\n\r\n  notesJSON.forEach((n)=>{\r\n    notes.push(<Note id={n.id} note={n.note} hidden={n.hidden} lang={n.lang}></Note>);\r\n   });\r\n    \r\n  //\r\n  if(this.props.w.FORM !== undefined && this.props.w.FORM !== null){\r\n      if(this.props.w.FORM.length === undefined){\r\n        isGlossIncluded = this.props.displayOptions.morphemeTranscriptions.includes(this.props.w.FORM.kindOf);\r\n        thisClassName = (this.props.isWordList === true)?'wordlistWord':'morpheme';\r\n\r\n        transcriptions.push(\r\n                  <Typography variant=\"body2\" component=\"p\" style={!isGlossIncluded?{display:'none'}:{visibility:'inherit'}} className={`transcription ${thisClassName} morpheme-${this.props.w.FORM.kindOf}`}>\r\n                    {this.props.w.FORM.text}{notesJSON.map(n=><sup class={\"circle note \"+n.lang}>{n.id}</sup>)}\r\n                  </Typography>\r\n                );\r\n                word = this.props.w.FORM.text;\r\n        }else{\r\n          this.props.w.FORM.forEach((f) => {\r\n            isGlossIncluded = this.props.displayOptions.morphemeTranscriptions.includes(f.kindOf);\r\n            thisClassName = (this.props.isWordList === true)?'wordlistWord':'morpheme';\r\n\r\n              transcriptions.push(\r\n                  <Typography variant=\"body2\" component=\"p\" className={`transcription ${thisClassName} morpheme-${f.kindOf}`}>\r\n                    {f.text}{notesJSON.map(n=><sup class={\"circle note \"+n.lang}>{n.id}</sup>)}\r\n                  </Typography>\r\n                );\r\n            });\r\n            word = this.props.w.FORM[0].text;\r\n        }\r\n  }\r\n\r\n    return (\r\n      <div id={this.props.w.id} className={`MORPHEME ${this.props.w.hasOwnProperty('class')?this.props.w.class:''}`} style={this.props.isWordList===true ? {} : {display:\"inline-block\"} } ref={el => (this.instance = el)} >\r\n      { \r\n            this.props.isWordList===true\r\n            ?\r\n            <div style={{display:'table'}} >\r\n              <div style={{display:'table-cell'}}>\r\n                W{this.props.wID} \r\n              </div>\r\n\r\n              <div style={{display:'table-cell'}} id={this.props.w.id} hidden={!this.props.displayOptions.words} >\r\n                <IconButton color=\"primary\" aria-label=\"play\" onClick={this.playSentence.bind(this)}>\r\n                  <PlayArrow />\r\n                </IconButton>\r\n                <IconButton color=\"primary\" aria-label=\"play\" onClick={this.pauseSentence.bind(this)}>\r\n                  <Pause />\r\n                </IconButton>\r\n              </div>\r\n\r\n              <div style={{display:'table-cell',width:'12em'}} class=\"morpheme\" id={this.props.w.id} hidden={!this.props.displayOptions.words} >\r\n                {transcriptions}\r\n              </div>\r\n\r\n              {translations}\r\n\r\n              <div style={{display:'table-cell'}}>\r\n                {notes}\r\n              </div>       \r\n            </div>\r\n            :\r\n            <div>\r\n              <p>\r\n                {transcriptions}\r\n              </p>\r\n\r\n              <p>\r\n                {translations}\r\n              </p>\r\n\r\n            </div>\r\n        }\r\n      \r\n\r\n\t\t\t     \r\n          \r\n\r\n        </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default Morpheme;","import React from 'react';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { PlayArrow, Pause } from '@material-ui/icons';\r\n\r\nclass PlayButton extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      displayPlay : document.getElementById('player').paused,\r\n      duration : (this.props.end - this.props.start) * 1000\r\n    }\r\n\r\n  }\r\n\r\n  showPlayPause = event => {\r\n      this.setState({\r\n        displayPlay : document.getElementById('player').paused\r\n      });\r\n  }\r\n\r\n  componentDidMount(){\r\n    document.getElementById('player').addEventListener('pause', this.showPlayPause);\r\n    document.getElementById('player').addEventListener('playing', this.showPlayPause);\r\n  }\r\n\r\n  playPause(){\r\n    var player = document.getElementById('player');\r\n    //si on change de phrase\r\n    /*if(this.props.id !== window.currentSentence || this.props.isWordList === true){\r\n      player.currentTime = this.props.start;\r\n    }*/\r\n\r\n    if(player.paused){\r\n      player.currentTime = this.props.start;\r\n      player.play();\r\n      if(!document.getElementsByName('continuousPlay')[0].checked) setTimeout(function() { player.pause() }, this.state.duration);\r\n    }else{\r\n      player.pause();\r\n    }\r\n\r\n    this.setState({\r\n      displayPlay : player.paused\r\n    });\r\n    \r\n  }\r\n\r\n  render() {\r\n    return(\r\n    <IconButton color=\"primary\" aria-label=\"play\" onClick={this.playPause.bind(this)} >\r\n      <PlayArrow style={{display:(this.state.displayPlay)?'block':'none'}} />\r\n      <Pause style={{display:(this.state.displayPlay)?'none':'block'}} />\r\n    </IconButton>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PlayButton;","import React from 'react';\r\nimport {Typography, Popper} from '@material-ui/core';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Note from './Note';\r\nimport Morpheme from './Morpheme';\r\nimport PlayButton from './PlayButton';\r\n\r\nclass Word extends React.Component {\r\n\tconstructor(props) {\r\n\t    super(props);\r\n\t    this.state = {\r\n\t      anchorEl: null,\r\n          open: false\r\n\t    };\r\n      this.idNote = (isNaN(this.props.idNote))?1:this.props.idNote - 1;\r\n\t}\r\n\r\n  highlight(){\r\n    window.highlight(this.props.w.id,'W');\r\n  }\r\n\r\n  handleClick = (event) => {\r\n    this.setState({\r\n      anchorEl: event.currentTarget,\r\n      open: true\r\n    });\r\n\r\n    if(event.currentTarget.id.length>0){\r\n      document.querySelectorAll('canvas').forEach((c)=>c.style.border=\"none\");\r\n      document.querySelector('[wordid=\"'+event.currentTarget.id+'\"]').style.border='solid';\r\n    }\r\n      };\r\n\r\n  handleClose = () => {\r\n    this.setState({\r\n      anchorEl: null,\r\n      open: false\r\n    });\r\n    document.querySelectorAll('canvas').forEach((c)=>c.style.border=\"none\");\r\n  };\r\n\r\n  getNotes(node,notesJSON){\r\n    if(node.NOTE !== undefined && node.NOTE !== null){\r\n      if(node.NOTE.length === undefined){\r\n          notesJSON.push({\"id\":this.idNote,\"note\": node.NOTE.message + node.NOTE.text,\"hidden\" : !this.props.displayOptions.notes.includes(node.NOTE['xml:lang']),lang:node.NOTE[\"xml:lang\"]});\r\n          this.idNote++;\r\n      }else{\r\n        node.NOTE.forEach((f) => {\r\n            notesJSON.push({\"id\":this.idNote,\"note\": f.message + f.text,\"hidden\" :!this.props.displayOptions.notes.includes(f['xml:lang']), lang:f[\"xml:lang\"]});\r\n            this.idNote++;\r\n          });\r\n      }\r\n    }\r\n  }\r\n/*\r\n  componentDidMount() {\r\n      if(this.props.w.AUDIO != undefined){\r\n        window.timeList.push({\r\n          start:parseFloat(this.props.w.AUDIO.start).toFixed(3),\r\n          end:parseFloat(this.props.w.AUDIO.end).toFixed(3),\r\n          mID:null,\r\n          wID:this.props.w.id,\r\n          sID:this.props.sID\r\n        });\r\n      }\r\n  }\r\n*/\r\n  render() {\r\n    this.idNote = (isNaN(this.props.idNote))?1:this.props.idNote - 1;\r\n\r\n  \tlet word = \"\";\r\n    const transcriptions = [];\r\n  \tconst translations = [];\r\n    const notes = [];\r\n    const notesJSON = [];\r\n\r\n    //DOI PopUp\r\n    const showDoi = (event) => {\r\n      //console.log(event.currentTarget.id);\r\n        this.setState({ anchorEl: this.state.anchorEl ? null : event.currentTarget});\r\n      };\r\n    const open = Boolean(this.state.anchorEl);\r\n      const popperId = open ? 'simple-popper' : undefined;\r\n    /////////\r\n\r\n    //cas où une seule balise FORM est trouvé=>converti en objet et pas en tableau\r\n    var isGlossIncluded = false;\r\n    var thisClassName = \"\";\r\n\r\n    const tableBordered = {\r\n      /*\r\n      border: \"1px solid black\",\r\n      borderCollapse: \"collapse\"\r\n      */\r\n    };\r\n\r\n    const visible = {\r\n      visibility: \"inherit\"\r\n    };\r\n\r\n    const invisible = {\r\n      display: \"none\"\r\n    };\r\n\r\n    const tableBorderedVisible = {\r\n      ...tableBordered,\r\n      ...visible\r\n    };\r\n\r\n    const tableBorderedInvisible = {\r\n      ...tableBordered,\r\n      ...invisible\r\n    }\r\n\r\n\r\n/////////////////////////////\r\n    //GESTION DES TRADUCTIONS\r\n/////////////////////////////\r\n    if(this.props.w.TRANSL !== undefined && this.props.w.TRANSL !== null){\r\n\t    if(this.props.w.TRANSL.length === undefined){\r\n        isGlossIncluded = this.props.displayOptions.wordTranslations.includes(this.props.w.TRANSL[\"xml:lang\"]);\r\n        thisClassName = (this.props.isWordList === true)?'wordlistWord':'word';\r\n\r\n        //gestion de l'affichage tableau des WordList : une colonne par langue disponible\r\n        if(this.props.isWordList === true){\r\n          this.props.availableOptions.word.translations.forEach((lang) => {\r\n\r\n            if(lang === this.props.w.TRANSL['xml:lang']){\r\n              translations.push(\r\n                <Typography variant=\"body2\" component='td' style={!isGlossIncluded?tableBorderedInvisible:tableBorderedVisible} className={`translation ${thisClassName} word-${this.props.w.TRANSL['xml:lang']}`}>\r\n                  {this.props.w.TRANSL.text}\r\n                </Typography>\r\n              );\r\n            }else{\r\n              translations.push(\r\n                <Typography variant=\"body2\" component='td' style={!isGlossIncluded?tableBorderedInvisible:tableBorderedVisible} className={`translation ${thisClassName} word-${this.props.w.TRANSL['xml:lang']}`}>\r\n                  \r\n                </Typography>\r\n              );\r\n            }\r\n          });\r\n        }else{\r\n          translations.push(\r\n            <Typography variant=\"body2\" component='p' style={!isGlossIncluded?invisible:visible} className={`translation ${thisClassName} word-${this.props.w.TRANSL['xml:lang']}`}>\r\n              {this.props.w.TRANSL.text}\r\n            </Typography>\r\n          );\r\n        }\r\n\r\n\t    }else{\r\n\r\n        //gestion de l'affichage tableau des WordList : une colonne par langue disponible\r\n        if(this.props.isWordList === true){\r\n          this.props.availableOptions.word.translations.forEach((lang) => {\r\n\r\n            var found = false;\r\n            isGlossIncluded = this.props.displayOptions.wordTranslations.includes(lang);\r\n            thisClassName = 'wordlistWord';\r\n\r\n              this.props.w.TRANSL.forEach((t) => {\r\n                \r\n                if(lang === t['xml:lang']){\r\n                  found = true;\r\n\r\n                  translations.push(\r\n                      <Typography variant=\"body2\" component='td' style={!isGlossIncluded?tableBorderedInvisible:tableBorderedVisible}  className={`translation ${thisClassName} word-${t['xml:lang']}`}>\r\n                        {t.text}\r\n                      </Typography>\r\n                    );\r\n                }\r\n              });\r\n\r\n            if(found===false){\r\n\r\n              translations.push(\r\n                      <Typography variant=\"body2\" component='td' style={!isGlossIncluded?tableBorderedInvisible:tableBorderedVisible}   className={`translation ${thisClassName} word-${lang}`}>\r\n                        \r\n                      </Typography>\r\n                    );\r\n            }\r\n            \r\n          });\r\n        }else{\r\n          this.props.w.TRANSL.forEach((t) => {\r\n            isGlossIncluded = this.props.displayOptions.wordTranslations.includes(t[\"xml:lang\"]);\r\n            thisClassName = 'word';\r\n\r\n            translations.push(\r\n                <Typography variant=\"body2\" component='p' style={!isGlossIncluded?invisible:visible}  className={`translation ${thisClassName} word-${t['xml:lang']}`}>\r\n                  {t.text}\r\n                </Typography>\r\n              );\r\n          });\r\n        }\r\n\t      \r\n\t    }\r\n    }\r\n\r\n  // Get note(s) of the sentence\r\n  /*\r\n  if(this.props.w.NOTE !== undefined && this.props.w.NOTE !== null){\r\n    if(this.props.w.NOTE.length === undefined){\r\n      notes.push(\r\n              <Typography variant=\"body2\" component=\"p\" className={`note ${this.props.w.NOTE['xml:lang']}`}>\r\n                {this.props.w.NOTE.message} {this.props.w.NOTE.text}\r\n              </Typography>\r\n            );\r\n    }else{\r\n      this.props.w.NOTE.forEach((f) => {\r\n          notes.push(\r\n              <Typography variant=\"body2\" component=\"p\" className={`note ${f['xml:lang']}`}>\r\n                {f.message} {f.text}\r\n              </Typography>\r\n            );\r\n        });\r\n    }\r\n  }\r\n*/\r\n\r\n  // Get note(s) of the word\r\n  this.getNotes(this.props.w,notesJSON);\r\n\r\n  notesJSON.forEach((n)=>{\r\n    notes.push(<Note id={n.id} note={n.note} hidden={n.hidden} lang={n.lang}></Note>);\r\n   });\r\n    \r\n/////////////////////////////\r\n//GESTION DES TRANSCRIPTIONS\r\n/////////////////////////////\r\n\r\n  if(this.props.w.FORM !== undefined && this.props.w.FORM !== null){\r\n      // si une seule transcription disponible\r\n      if(this.props.w.FORM.length === undefined){\r\n        isGlossIncluded = this.props.displayOptions.wordTranscriptions.includes(this.props.w.FORM.kindOf);\r\n        thisClassName = (this.props.isWordList === true)?'wordlistWord':'word';\r\n        \r\n        var styleCombined;\r\n        \r\n        if(isGlossIncluded){\r\n          if(this.props.isWordList === true){\r\n            styleCombined = tableBorderedVisible;\r\n          }else{\r\n            styleCombined = visible;\r\n          }\r\n        }else{\r\n          if(this.props.isWordList === true){\r\n            styleCombined = tableBorderedInvisible;\r\n          }else{\r\n            styleCombined = invisible;\r\n          }\r\n        }\r\n\r\n        transcriptions.push( \r\n                  <Typography variant=\"body2\" component={(this.props.isWordList === true)?\"td\":\"p\"} style={styleCombined} className={`transcription ${thisClassName} word-${this.props.w.FORM.kindOf}`}>\r\n                    {this.props.w.FORM.text}{notesJSON.map(n=><sup style={{display:(!this.props.displayOptions.notes.includes(n.lang))?\"none\":\"inline-block\"}} className={\"circle note \"+n.lang}>{n.id}</sup>)}\r\n                  </Typography>\r\n                );\r\n                word = this.props.w.FORM.text;\r\n\r\n      // si plusieurs transcriptions disponibles\r\n      }else{\r\n\r\n          this.props.w.FORM.forEach((f) => {\r\n            isGlossIncluded = this.props.displayOptions.wordTranscriptions.includes(f.kindOf);\r\n            thisClassName = (this.props.isWordList === true)?'wordlistWord':'word';\r\n\r\n            var styleCombined;\r\n        \r\n            if(isGlossIncluded){\r\n              if(this.props.isWordList === true){\r\n                styleCombined = tableBorderedVisible;\r\n              }else{\r\n                styleCombined = visible;\r\n              }\r\n            }else{\r\n              if(this.props.isWordList === true){\r\n                styleCombined = tableBorderedInvisible;\r\n              }else{\r\n                styleCombined = invisible;\r\n              }\r\n            }\r\n\r\n              transcriptions.push(\r\n                  <Typography variant=\"body2\" component={(this.props.isWordList === true)?\"td\":\"p\"} style={styleCombined} className={`transcription ${thisClassName} word-${f.kindOf}`}>\r\n                    {f.text}{notesJSON.map(n=><sup style={{display:(!this.props.displayOptions.notes.includes(n.lang))?\"none\":\"inline-block\"}} className={\"circle note \"+n.lang}>{n.id}</sup>)}\r\n                  </Typography>\r\n                );\r\n            });\r\n            word = this.props.w.FORM[0].text;\r\n      }\r\n  }\r\n\r\n  var morphemes = [];\r\n\r\n  if(this.props.w.M !== undefined && this.props.w.M !== null){\r\n          \r\n            if(this.props.w.M.length>0){\r\n              \r\n              this.props.w.M.forEach((m) =>{\r\n                morphemes.push(\r\n                      <Morpheme w={m} displayOptions={this.props.displayOptions} idNote={this.idNote} />\r\n                  );\r\n              });\r\n              \r\n\r\n            }else{\r\n            morphemes.push(\r\n                      <Morpheme w={this.props.w.M} displayOptions={this.props.displayOptions} idNote={this.idNote} />\r\n                  );\r\n            }\r\n    }\r\n\r\n    return (\r\n        \r\n        \r\n            this.props.isWordList===true\r\n            ?\r\n            <tr id={this.props.w.id} className=\"WORD\" style={tableBordered} ref={el => (this.instance = el)} >\r\n      \r\n              <td style={tableBordered}>\r\n                {this.props.w.id}\r\n                <IconButton aria-describedby={popperId} onClick={showDoi} id={\"btn_doi_W\"+this.props.sID}><img className=\"doi\" src=\"/dist/images/DOI_logo.svg\" alt=\"doi\" /></IconButton>\r\n                <Popper id={\"doi_W\"+this.props.sID} open={open} anchorEl={this.state.anchorEl} test={document.getElementById(\"btn_doi_W\"+this.props.sID)}>\r\n                  <div>{this.props.doi}</div>\r\n                </Popper> \r\n                { \r\n                this.props.w.hasOwnProperty('AUDIO')\r\n                ?\r\n                <PlayButton continuousPlay={this.props.displayOptions.continuousPlay} start={this.props.w.AUDIO?this.props.w.AUDIO.start:0} end={this.props.w.AUDIO?this.props.w.AUDIO.end:0} isWordList={true} />\r\n                :\r\n                <div></div>\r\n                }\r\n              </td>\r\n\r\n               <React.Fragment>\r\n              {transcriptions}\r\n              {morphemes}\r\n              {translations}\r\n               </React.Fragment>\r\n\r\n              <td className=\"notes\">\r\n                {notes}\r\n              </td> \r\n\r\n            </tr>\r\n            :\r\n            <div id={this.props.w.id} onMouseOver={this.highlight.bind(this)} className={`WORD ${this.props.w.hasOwnProperty('class')?this.props.w.class:''}`} style={this.props.isWordList===true ? {} : {display:\"inline-block\"} } ref={el => (this.instance = el)} >\r\n              <div>\r\n                <div className=\"transcBlock\">\r\n                  {transcriptions}\r\n                </div>\r\n                <div className=\"morphemesBlock\">\r\n                  {morphemes}\r\n                </div>\r\n                <div className=\"translBlock\">\r\n                  {translations}\r\n                </div>\r\n\r\n              </div>\r\n            </div>  \r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default Word;","import React from 'react';\r\nimport Picture from './Picture';\r\nimport Word from './Word';\r\nimport Morpheme from './Morpheme';\r\nimport Note from './Note';\r\nimport { Card, Avatar, CardContent, Popper } from '@material-ui/core';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport PlayButton from './PlayButton';\r\nimport blue from \"@material-ui/core/colors/blue\";\r\n\r\n//BUG POPOVER\r\n//https://codepen.io/chocochip/pen/zYxMgRG\r\nclass Sentence extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t    super(props);\r\n\t    this.state = {\r\n\t        displayOptions : this.props.displayOptions,\r\n\t        notes : null, //#17\r\n\t        anchorEl : null\r\n\t    };\r\n\t    this.idNote = 1;\r\n\t}\r\n\r\n\r\n\tgetNotes(node,notesJSON){\r\n\t\tif(node.NOTE !== undefined && node.NOTE !== null){\r\n\t\t\tif(node.NOTE.length === undefined){\r\n\t\t\t    notesJSON.push({\"id\":this.idNote,\"note\": node.NOTE.message + node.NOTE.text,\"hidden\" : !this.props.displayOptions.notes.includes(node.NOTE['xml:lang']),lang:node.NOTE[\"xml:lang\"]});\r\n\t\t\t    this.idNote++;\r\n\t\t\t}else{\r\n\t\t\t\tnode.NOTE.forEach((f) => {\r\n\t\t\t      notesJSON.push({\"id\":this.idNote,\"note\": f.message + f.text,\"hidden\" :!this.props.displayOptions.notes.includes(f['xml:lang']), lang:f[\"xml:lang\"]});\r\n\t\t\t      this.idNote++;\r\n\t\t\t    });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n  render() {\r\n\r\n  \tthis.idNote = 1;\r\n  \tconst transcriptions = [];\r\n\tconst translations = [];\r\n\tconst notesJSON = [];\r\n\tconst words = [];\r\n\tconst canvas = [];\r\n\r\n\t//DOI PopUp\r\n\r\n\tconst showDoi = (event) => {\r\n\t\t//console.log(event.currentTarget.id);\r\n\t    this.setState({ anchorEl: this.state.anchorEl ? null : event.currentTarget});\r\n\t  };\r\n\tconst open = Boolean(this.state.anchorEl);\r\n  const popperId = open ? 'simple-popper' : undefined;\r\n\r\n\r\n\r\n\t// Get translation(s) of the sentence\r\n\tif(this.props.s.TRANSL !== null && this.props.s.TRANSL !== undefined){\r\n\t\tif(this.props.s.TRANSL.length === undefined){\r\n\t\t\ttranslations.push(\r\n\t\t          <Typography hidden={!this.props.displayOptions.sentenceTranslations.includes(this.props.s.TRANSL[\"xml:lang\"])} variant=\"body2\" component=\"p\" className={`translation sentence-${this.props.s.TRANSL['xml:lang']}`}>\r\n\t\t\t          <b>{this.props.s.TRANSL.text}</b>\r\n\t\t\t        </Typography>\r\n\t\t        );\r\n\t\t}else{\r\n\t\t\tthis.props.s.TRANSL.forEach((t) => {\r\n\t\t      translations.push(\r\n\t\t        \t<Typography hidden={!this.props.displayOptions.sentenceTranslations.includes(t[\"xml:lang\"])} variant=\"body2\" component=\"p\" className={`translation sentence-${t[\"xml:lang\"]}`}>\r\n\t\t\t        \t<b>{t.text}</b>\r\n\t\t\t       \t</Typography>\r\n\t\t        );\r\n\t\t    });\r\n\t\t}\r\n\t}\r\n\t\r\n\t//#17\r\n\t// Get note(s) of the sentence\r\n\tthis.getNotes(this.props.s,notesJSON);\r\n\r\n//\r\n\t// Get transcription(s) of the sentence\r\n\tif(this.props.s.FORM !== undefined && this.props.s.FORM !== null){\r\n\t\tif(this.props.s.FORM.length === undefined){\r\n\t\t\ttranscriptions.push(\r\n\t\t          <Typography hidden={!this.props.displayOptions.sentenceTranscriptions.includes(this.props.s.FORM.kindOf)} variant=\"body2\" component=\"p\" className={`transcription sentence-${this.props.s.FORM.kindOf}`}>\r\n\t\t\t          <b>{this.props.s.who} : {this.props.s.FORM.text}</b>{notesJSON.map(n=><sup style={{display:(!this.props.displayOptions.notes.includes(n.lang))?\"none\":\"inline-block\"}} className={\"circle note \"+n.lang}>{n.id}</sup>)}\r\n\t\t\t        </Typography>\r\n\t\t        );\r\n\r\n\t\t}else{\r\n\t\t\tthis.props.s.FORM.forEach((f) => {\r\n\t\t      transcriptions.push(\r\n\t\t          <Typography hidden={!this.props.displayOptions.sentenceTranscriptions.includes(f.kindOf)} variant=\"body2\" component=\"p\" className={`transcription sentence-${f.kindOf}`}>\r\n\t\t\t          <b>{this.props.s.who} : {f.text}</b>{notesJSON.map(n=><sup style={{display:(!this.props.displayOptions.notes.includes(n.lang))?\"none\":\"inline-block\"}} className={\"circle note \"+n.lang}>{n.id}</sup>)}\r\n\t\t\t        </Typography>\r\n\t\t        );\r\n\t\t    });\r\n\t\t}\r\n\t}\r\n  \t\r\n    \r\n    if(this.props.s.AREA !== undefined && this.props.s.AREA !== null){\r\n    \tvar coords = this.props.s.AREA.coords.split(',');\r\n\t    var delta_x = coords[0];//offset for x, image positioning\r\n\t    var delta_y = coords[1];//offset for y, image positioning\r\n\t}\r\n\t\r\n\t// Get word(s) of the sentence\r\n\tif(this.props.s.W !== undefined && this.props.s.W !== null){\r\n\r\n\t\t//W can be an array or an object depending on the number of children in the XML\r\n\t\t//Object if only one Word, Array if more than 1 word\r\n\t\t\r\n\r\n\t\tif(Array.isArray(this.props.s.W)){\r\n\t\t\t//get words of the sentence\r\n\t\t    this.props.s.W.forEach((w) => {\r\n\r\n\t\t    \tif(w.M !== undefined && w.M !== null){\r\n\t\t\t\t\tvar morphemes = [];\r\n\t\t\t\t\tvar divWord;\r\n\r\n\r\n\t\t    \t\tif(w.M.length>0){\r\n\t\t    \t\t\t\r\n\t\t    \t\t\tw.M.forEach((m) =>{\r\n\t\t    \t\t\t\t// Get note(s) of the morpheme\r\n\t\t\t\t\t\t\tthis.getNotes(m,notesJSON);\r\n\r\n\t\t\t    \t\t\tmorphemes.push(\r\n\t\t\t\t          \t\t<Morpheme wID={w.id} w={m} displayOptions={this.props.displayOptions} idNote={this.idNote} />\r\n\t\t\t\t        \t);\r\n\r\n\r\n\t\t\t    \t\t});\r\n\t\t\t    \t\t//divWord = <div id={w.id} className=\"WORD hasMorphemes\" style={{display: \"inline-block\"}}>{morphemes}</div>;\r\n\t\t\t\t\t\tdivWord = <Word sID={this.props.s.id} w={w} displayOptions={this.props.displayOptions} idNote={this.idNote} />;\r\n\t\t\t    \t\twords.push(divWord);\r\n\r\n\t\t    \t\t}else{\r\n\t\t    \t\t\t// Get note(s) of the morpheme\r\n\t\t\t\t\t\tthis.getNotes(w.M,notesJSON);\r\n\t\t\t\t\t\tmorphemes.push(\r\n\t\t\t\t          \t\t<Morpheme wID={w.id} w={w.M} displayOptions={this.props.displayOptions} idNote={this.idNote} />\r\n\t\t\t\t        \t);\r\n\t\t\t\t\t\t//divWord = <div id={w.id} className=\"WORD hasMorphemes\" style={{display: \"inline-block\"}}>{morphemes}</div>;\r\n\t\t\t\t\t\tdivWord = <Word sID={this.props.s.id} w={w} displayOptions={this.props.displayOptions} idNote={this.idNote} />;\r\n\t\t\t    \t\twords.push(divWord);\r\n\t\t    \t\t\t\r\n\t\t    \t\t}\r\n\r\n\r\n\t\t    \t}else{\r\n\t\t    \t\t// Get note(s) of the word\r\n\t\t\t\t\tthis.getNotes(w,notesJSON);\r\n\r\n\t\t    \t\twords.push(\r\n\t\t\t          \t<Word sID={this.props.s.id} w={w} displayOptions={this.props.displayOptions} idNote={this.idNote} />\r\n\t\t\t        );\r\n\r\n\t\t\t        if(w.AREA !== undefined && w.AREA !== null){\r\n\t\t\t        \tvar coords = w.AREA.coords.split(',');\r\n\t\t\t\t        coords[0] -= delta_x;\r\n\t\t\t\t        coords[1] -= delta_y;\r\n\t\t\t\t\t\tcoords[2] -= delta_x;\r\n\t\t\t\t        coords[3] -= delta_y;\r\n\r\n\t\t\t\t        //var newCoords = coords.join(',');\r\n\t\t\t\t        var canvasStyle = {\r\n\t\t\t\t        \t'position': 'absolute',\r\n\t\t\t\t        \t'top': coords[1],\r\n\t\t\t\t        \t'left': coords[0],\r\n\t\t\t\t        \t\r\n\t\t\t\t        }\r\n\r\n\t\t\t\t        // Get transcription(s) of the word\r\n\t\t\t\t        var word=\"\";\r\n\t\t\t\t\t  \tif(w.FORM.length === undefined){\r\n\t\t\t\t\t  \t\tword = w.FORM.text\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t      word = w.FORM[0].text\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t        canvas.push(\r\n\t\t\t\t        \t<canvas title={word} style={canvasStyle} wordid={w.id} width={coords[2]-coords[0]} height={coords[3]-coords[1]} onClick={()=>document.getElementById(w.id).click()} ></canvas>\r\n\t\t\t\t        );\r\n\t\t\t\t        \r\n\t\t\t        }\r\n\t\t    \t}\t\r\n\t\t     \t\r\n\t\t    });\r\n\r\n\t\t}\t\r\n\t\t\r\n\r\n\t}\r\n\t \r\n\t var notes = [];\r\n\t //#17 NOTES\r\n\t notesJSON.forEach((n)=>{\r\n\t \tnotes.push(<Note id={n.id} note={n.note} hidden={n.hidden} lang={n.lang}></Note>);\r\n\t });\r\n\r\n    \r\n    var avatarStyle={\r\n    \t'backgroundColor': blue[800],\r\n    \t'display': 'inline-flex'\r\n    }\r\n\r\n    return (\r\n      <div id={this.props.s.id} className=\"SENTENCE\" ref={el => (this.instance = el)}>\r\n\t\t<Card> \r\n\t      <CardContent>  \t\r\n\t      \t\t{(this.props.s.AREA !== undefined) ? \r\n\t      \t\t(\r\n\t      \t\t<Picture sentenceId={this.props.s.id} imageSrc={this.props.imageSrc} canvas={canvas} area={this.props.s.AREA} />\r\n\t      \t\t):(<div></div>)\r\n\t      \t\t}\r\n\t       \t\r\n\t        <div style={{textAlign:\"initial\"}} className=\"annotationsBlock\">\r\n\r\n\t        \t<Avatar aria-label=\"sentenceId\" style={avatarStyle}>\r\n\t\t            {this.props.s.id} \r\n\t\t          </Avatar>\r\n\t\t\t\t<IconButton aria-describedby={popperId} onClick={showDoi} id={\"btn_doi_\"+this.props.s.id}><img className=\"doi\" src=\"/dist/images/DOI_logo.svg\" alt=\"doi\" /></IconButton>\r\n\t        \t<Popper id={\"doi_\"+this.props.s.id} open={open} anchorEl={this.state.anchorEl} test={document.getElementById(\"btn_doi_\"+this.props.s.id)}>\r\n\t\t\t      <div>{this.props.doi}</div>\r\n\t\t\t    </Popper>\r\n\t\t\t    { \r\n\t\t    \t \tthis.props.s.hasOwnProperty('AUDIO')\r\n\t\t    \t \t?\r\n\t\t\t\t\t<PlayButton continuousPlay={this.state.displayOptions.continuousPlay} start={this.props.s.AUDIO?this.props.s.AUDIO.start:0} end={this.props.s.AUDIO?this.props.s.AUDIO.end:0} id={this.props.s.id} />\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div></div>\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"transcBlock\" style={{display: \"inline-block\"}}>\r\n\t        \t\t{transcriptions}\r\n\t        \t</div>\r\n\r\n\t        \t<div className=\"wordsBlock\">\r\n\t\t\t\t\t{words}\r\n\t\t\t\t</div>\r\n\r\n\t        \t<div className=\"translBlock\">\r\n\t        \t\t{translations}\r\n\t        \t</div>\r\n\r\n\t        \t<div className=\"notesBlock\">\r\n\t        \t\t{notes}\r\n\t        \t</div>\r\n\t        \t\r\n\t        </div> \r\n\t      </CardContent>\r\n\t    </Card>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Sentence;","import React from 'react';\r\nimport Sentence from './Sentence';\r\nimport Word from './Word';\r\nimport Morpheme from './Morpheme';\r\nimport { Container } from '@material-ui/core';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nclass Annotations extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoaded: false,\r\n      annotationData: [],\r\n      displayOptions: this.props.displayOptions,\r\n      availableOptions: this.props.availableOptions,\r\n      isWordList: false\r\n    };\r\n  }\r\n\r\n  shouldComponentUpdate() {\r\n    //console.log('Annotations - shouldComponentUpdate lifecycle');\r\n    return false;\r\n  }\r\n\r\n  componentDidMount() {\r\n        window.timeList = this.props.timeList;\r\n  }\r\n\r\n  render() {\r\n    var annotationItems = [];\r\n    var wholeTranscriptions = [];\r\n    var wholeTranslations = [];\r\n    var notes = [];\r\n    var isWordList = false;\r\n\r\n    var imageSrc = \"\";\r\n    var doi = this.props.doi;\r\n    var sID = 0;\r\n\r\n    var player = document.querySelector('#player');\r\n\r\n\tvar trackTest;\r\n    var trackTranscription;\r\n    var trackTranslation;\r\n\r\n    if(player !== null){\r\n\t\ttrackTest = player.textTracks.getTrackById('test');\r\n    \ttrackTranscription = player.textTracks.getTrackById('trackTranscription');\r\n    \ttrackTranslation = player.textTracks.getTrackById('trackTranslation');\r\n\r\n    \ttrackTest.mode=\"showing\";\r\n    \ttrackTranscription.mode=\"showing\";\r\n    \ttrackTranslation.mode=\"showing\";\r\n    }\r\n    \r\n   //if(player.textTracks.length === 1){     \r\n      //var trackTranscription = player.addTextTrack(\"subtitles\",\"transcription\");\r\n      //var trackTranslation = player.addTextTrack(\"subtitles\",\"translation\");\r\n      \r\n   // }\r\n\r\n    if(this.props.annotations.TEXT !== undefined && this.props.annotations.TEXT !== null)\r\n      var sentences = this.props.annotations.TEXT.S;\r\n\r\n    if(this.props.annotations.WORDLIST !== undefined && this.props.annotations.WORDLIST !== null)\r\n      var wordlist = this.props.annotations.WORDLIST.W;\r\n\r\n    //this.state.annotationData.forEach((a) => {\r\n    if(sentences !== null && sentences !== undefined){\r\n      sentences.forEach((a) => {\r\n\r\n        if(a.AREA !== undefined && a.AREA.image !== undefined){\r\n          this.props.images.forEach((i) =>{\r\n            var idImage = i.id.split('.version');\r\n\r\n            if(idImage[0] === a.AREA.image)\r\n              {\r\n                imageSrc=i.url;\r\n              }\r\n          });\r\n        }\r\n        \r\n        sID++;\r\n        //#3\r\n        //var doiSentenceUrl = doiUrl + doi + \"&sentence=S\" + sID;\r\n        var doiSentenceUrl = doi + \"#\" + a.id;\r\n        //TEST VTT\r\n\t   if(player !== null){\r\n\t        if(trackTranscription.cues.length < sentences.length){\r\n\t          \r\n\t          var transcSubtitle = \"\";\r\n\t          var translSubtitle = \"\";\r\n\r\n\t          if(typeof(a.FORM) === \"object\"){\r\n\t            if(a.FORM !== null)\r\n\t            transcSubtitle = a.FORM.text;\r\n\t          }else{\r\n\t            if(a.FORM[0].text !== null)\r\n\t            transcSubtitle = a.FORM[0].text;\r\n\t          }\r\n\r\n\t          if(a.TRANSL !== null){\r\n\t            if(typeof(a.TRANSL) === \"object\"){\r\n\t              if(a.TRANSL !== null)\r\n\t              translSubtitle = a.TRANSL.text;\r\n\t            }else{\r\n\t              if(a.TRANSL[0].text !== null)\r\n\t              translSubtitle = a.TRANSL[0].text;\r\n\t            }\r\n\t          }\r\n\r\n\t          var cueStart = (a.AUDIO !== undefined)?a.AUDIO.start:0;\r\n\t          var cueEnd = (a.AUDIO !== undefined)?a.AUDIO.end:0;\r\n\r\n\t          const cueTransc = new VTTCue(cueStart, cueEnd, transcSubtitle);\r\n\t          const cueTransl = new VTTCue(cueStart, cueEnd, translSubtitle);\r\n\r\n\t          cueTransc.size = 99;\r\n\t          cueTransl.size = 99;\r\n\t          cueTransc.line = 12;\r\n\t          cueTransl.line = 14;\r\n\r\n\t          \r\n\t          \ttrackTest.addCue(cueTransc);\r\n\t          \ttrackTest.addCue(cueTransl);\r\n\t          \ttrackTranscription.addCue(cueTransc);\r\n\t          \ttrackTranslation.addCue(cueTransl);\r\n\t          \r\n\t          \r\n\t        }\r\n\t    }//FIN TEST\r\n        \r\n        annotationItems.push(\r\n            <Sentence doi={doiSentenceUrl} sID={sID} s={a} imageSrc={imageSrc} displayOptions={this.state.displayOptions} />\r\n          );\r\n\r\n      });\r\n    }\r\n\r\n    if(wordlist !== null && wordlist !== undefined && Array.isArray(wordlist)){\r\n    //Si c'est une liste de mots\r\n      isWordList = true;\r\n      this.setState({isWordList:true});\r\n\r\n          //W can be an array or an object depending on the number of children in the XML\r\n          //Object if only one Word, Array if more than 1 word\r\n\r\n          //if(Array.isArray(wordlist)){\r\n            //get words of the sentence\r\n              wordlist.forEach((w) => {\r\n\r\n                if(w.M !== undefined && w.M !== null){\r\n\r\n                  if(w.M.length>0){\r\n                    w.M.forEach((m) =>{\r\n                      annotationItems.push(\r\n                            <Morpheme w={m} wID={++sID} displayOptions={this.props.displayOptions} isWordList={true} />\r\n                        );\r\n                    });\r\n                  }else{\r\n                    annotationItems.push(\r\n                            <Morpheme w={w.M} wID={++sID} displayOptions={this.props.displayOptions} isWordList={true} />\r\n                        );\r\n                  }\r\n\r\n\r\n                }else{\r\n                  ++sID;\r\n                  var doiWordUrl = doi + \"#W\" + sID;\r\n                  annotationItems.push(\r\n                    <Word w={w} wID={sID} displayOptions={this.props.displayOptions} availableOptions={this.props.availableOptions} isWordList={true} doi={doiWordUrl} />\r\n                  );\r\n                } \r\n                \r\n              });\r\n\r\n          //} \r\n          \r\n\r\n    }\r\n    \r\n\r\n    // Get whole transcription(s) of the doc\r\n    if(this.props.annotations.TEXT.FORM !== undefined && this.props.annotations.TEXT.FORM !== null){\r\n      if(this.props.annotations.TEXT.FORM.length === undefined){\r\n        wholeTranscriptions.push(\r\n                <Typography hidden={(!this.props.displayOptions.textTranscriptions) || (!this.props.displayOptions.textTranscriptions.includes(this.props.annotations.TEXT.FORM.kindOf))} variant=\"body2\" component=\"p\" className={\"text-\"+this.props.annotations.TEXT.FORM.kindOf + \" transcription\"}>\r\n                  {this.props.annotations.TEXT.FORM.text}\r\n                </Typography>\r\n              );\r\n      }else{\r\n        this.props.annotations.TEXT.FORM.forEach((f) => {\r\n            wholeTranscriptions.push(\r\n                <Typography key={\"textForm\"+f.kindOf} hidden={(!this.props.displayOptions.textTranscriptions) || (!this.props.displayOptions.textTranscriptions.includes(f.kindOf))} variant=\"body2\" component=\"p\" className={\"text-\" + f.kindOf + \" transcription\"}>\r\n                  {f.text}\r\n                </Typography>\r\n              );\r\n          });\r\n      }\r\n    }\r\n//// \r\n    // Get whole translation(s) of the doc\r\n    if(this.props.annotations.TEXT.TRANSL !== null && this.props.annotations.TEXT.TRANSL !== undefined){\r\n      if(this.props.annotations.TEXT.TRANSL.length === undefined){\r\n\r\n        wholeTranslations.push(\r\n                <Typography hidden={!this.props.displayOptions.textTranslations.includes(this.props.annotations.TEXT.TRANSL[\"xml:lang\"])} variant=\"body2\" component=\"p\" className={`translation text-${this.props.annotations.TEXT.TRANSL['xml:lang']}`}>\r\n                  {this.props.annotations.TEXT.TRANSL.text}\r\n                </Typography>\r\n              );\r\n      }else{\r\n        this.props.annotations.TEXT.TRANSL.forEach((t) => {\r\n            wholeTranslations.push(\r\n                <Typography hidden={!this.props.displayOptions.textTranslations.includes(t[\"xml:lang\"])} variant=\"body2\" component=\"p\" className={`translation text-${t['xml:lang']}`}>\r\n                  {t.text}\r\n                </Typography>\r\n              );\r\n          });\r\n      }\r\n    }\r\n\r\n    // Get note(s) of the doc\r\n    if(this.props.annotations.TEXT.NOTE !== undefined && this.props.annotations.TEXT.NOTE !== null){\r\n      if(this.props.annotations.TEXT.NOTE.length === undefined){\r\n        notes.push(\r\n                <Typography hidden={!this.props.displayOptions.notes.includes(this.props.annotations.TEXT.NOTE[\"xml:lang\"])} variant=\"body2\" component=\"p\" className={`note ${this.props.annotations.TEXT.NOTE['xml:lang']}`}>\r\n                  {this.props.annotations.TEXT.NOTE.message}\r\n                </Typography>\r\n              );\r\n      }else{\r\n        this.props.annotations.TEXT.NOTE.forEach((t) => {\r\n            notes.push(\r\n                <Typography hidden={!this.props.displayOptions.notes.includes(t[\"xml:lang\"])} variant=\"body2\" component=\"p\" className={`note ${t['xml:lang']}`}>\r\n                  {t.message}\r\n                </Typography>\r\n              );\r\n          });\r\n      }\r\n    }\r\n\r\n//\r\n\r\n    return (\r\n      <div ref={el => (this.instance = el)}>\r\n        <div className=\"TEXT\">\r\n          <Container fixed id=\"documentTranscriptionsBlock\">\r\n                 {wholeTranscriptions}\r\n          </Container>\r\n          <Container fixed id=\"documentTranslationsBlock\">\r\n                 {wholeTranslations}\r\n          </Container>\r\n          <Container fixed id=\"documentNotesBlock\">\r\n                 {notes}\r\n          </Container>\r\n        </div>\r\n        <Container fixed id=\"documentAnnotationsBlock\">\r\n          {\r\n            isWordList\r\n              ?\r\n              <table>\r\n                {annotationItems}\r\n              </table>\r\n              :\r\n              annotationItems\r\n          }\r\n              \r\n        </Container>\r\n        {\r\n          this.props.extensionFile==='pdf' &&\r\n            <Container>\r\n              <object data={this.props.urlFile.replace('http:','https:')} type=\"application/pdf\" width=\"100%\" height=\"500px\">\r\n                <embed src={this.props.urlFile.replace('http:','https:')} type='application/pdf'/>\r\n              </object>\r\n\r\n            </Container>\r\n          }\r\n          {\r\n            this.props.type==='image' && this.props.format==='image' &&\r\n            <Container>\r\n                <img src={this.props.urlFile.replace('http:','https:')} />\r\n            </Container>\r\n          }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Annotations;","import React from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\n//import Metadata from './Components/Metadata';\r\nimport DisplayOptions from './Components/DisplayOptions';\r\nimport Player from './Components/Player';\r\nimport Annotations from './Components/Annotations';\r\n\r\nimport './App.css';\r\n\r\n\r\nconst parserUrl = \"https://eastling.huma-num.fr/player/parserMySQL.php\";\r\n\r\n\r\nclass App extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t    super(props);\r\n\t    this.state = {\r\n\t    \thasPrimaryId : false,\r\n\t    \thasSecondaryId : false,\r\n\t    \tisMediaLoaded : false,\r\n\t    \tisAnnotationsLoaded : false,\r\n\t    \thasMediaError : false,\r\n\t    \tmediaError : {},\r\n\t\t\thasAnnotationsError : false,\r\n\t    \tannotationsError : {},\r\n\t\t\tMETADATA: {},\r\n\t      \tMEDIAFILE : {},\r\n\t\t\tannotations : {},\r\n\t\t\tdoi : '',\r\n\t\t\timages : [],\r\n\t\t\tdisplayOptions : {},\r\n\t\t\tlangOptions : {\r\n\t\t\t\ttranscriptions:[],translations:[]\r\n\t\t\t},\r\n\t\t\toptions : {},\r\n\t\t\tisWordList : false,\r\n\t\t\ttimeList : [],\r\n\t\t\turlFile : '',\r\n\t\t\textensionFile : '',\r\n\t\t\tplayerLoaded : false\r\n\t    };\r\n\t  }\r\n\r\n\t   playerIsLoaded() {\r\n\t    this.setState({\r\n\t      playerLoaded: true\r\n\t    })\r\n\t  }\r\n\r\n\r\n\r\n\tgetUrlParameter (sVar) {\r\n\t\treturn unescape(window.location.search.replace(new RegExp(\"^(?:.*[&\\\\?]\" + escape(sVar).replace(/[\\.\\+\\*]/g, \"\\\\$&\") + \"(?:\\\\=([^&]*))?)?.*$\", \"i\"), \"$1\"));\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t  \t//15/07/2020 : changement suggéré par Edouard Sombié. oai_primary pour le média (audio, vidéo), oai_secondary pour le fichier d'annotations\r\n\t  \tvar oai_primary = this.getUrlParameter(\"oai_primary\");\r\n\t  \tvar oai_secondary = this.getUrlParameter(\"oai_secondary\");\r\n\t  \t//25/08/2020 : récupérer les options d'affichage dans l'URL (Edouard SOMBIE)\r\n\t  \tvar optionTextTranscriptions = this.getUrlParameter(\"optionTextTranscriptions\");\r\n\t  \tvar optionTextTranslations = this.getUrlParameter(\"optionTextTranslations\");\r\n\t  \tvar optionSentenceTranscriptions = this.getUrlParameter(\"optionSentenceTranscriptions\");\r\n\t  \tvar optionSentenceTranslations = this.getUrlParameter(\"optionSentenceTranslations\");\r\n\t  \tvar optionWordTranscriptions = this.getUrlParameter(\"optionWordTranscriptions\");\r\n\t  \tvar optionWordTranslations = this.getUrlParameter(\"optionWordTranslations\");\r\n\t  \tvar optionMorphemeTranscriptions = this.getUrlParameter(\"optionMorphemeTranscriptions\");\r\n\t  \tvar optionMorphemeTranslations = this.getUrlParameter(\"optionMorphemeTranslations\");\r\n\t  \tvar optionNotes = this.getUrlParameter(\"optionNotes\");\r\n\t  \tvar optionLang = (this.getUrlParameter(\"lang\").length > 0) ? this.getUrlParameter(\"lang\") : \"fr\";\r\n\t\tvar optionMode = (this.getUrlParameter(\"mode\").length > 0) ? this.getUrlParameter(\"mode\") : \"normal\";\r\n\t\tvar optionContinuousPlay = (this.getUrlParameter(\"continuousPlay\").length > 0) ? ((this.getUrlParameter(\"continuousPlay\") === \"true\") ? true : false) : false;\r\n\r\n\t\tvar anchor = window.location.hash;\r\n\r\n\t  \t//28/08/2020\r\n\t  \t//TODO gérer option Lang soit fr soit en, par défaut FR dans URL pour les translations options et libellés\r\n\t  \tthis.setState({\r\n\t        displayOptions: {\r\n\t        \ttextTranscriptions : (optionTextTranscriptions.length > 0) ? optionTextTranscriptions.split('+') : [],\r\n\t        \ttextTranslations : (optionTextTranslations.length > 0) ? optionTextTranslations.split('+') : [],\r\n\t        \tsentenceTranscriptions : (optionSentenceTranscriptions.length > 0) ? optionSentenceTranscriptions.split('+') : [],\r\n\t        \tsentenceTranslations : (optionSentenceTranslations.length > 0) ? optionSentenceTranslations.split('+') : [],\r\n\t        \twordTranscriptions : (optionWordTranscriptions.length > 0) ? optionWordTranscriptions.split('+') : [],\r\n\t        \twordTranslations : (optionWordTranslations.length > 0) ? optionWordTranslations.split('+') : [],\r\n\t        \tmorphemeTranscriptions : (optionMorphemeTranscriptions.length > 0) ? optionMorphemeTranscriptions.split('+') : [],\r\n\t        \tmorphemeTranslations : (optionMorphemeTranslations.length > 0) ? optionMorphemeTranslations.split('+') : [],\r\n\t        \tnotes : (optionNotes.length > 0) ? optionNotes.split('+') : [],\r\n\t        \tlang : optionLang,\r\n\t        \tmode : optionMode,\r\n\t\t\t\tcontinuousPlay : optionContinuousPlay,\r\n\t        },\r\n\t    });\r\n\r\n\t  \tvar params = new URLSearchParams(window.location.search);\r\n\t  \tvar newUrl = '';\r\n\t    if(document.location.search.indexOf(\"lang\")<0){\r\n\t    \t\r\n\t\t    params.set('lang',(optionLang.length > 0)?optionLang:'fr');\r\n\t\t    newUrl = window.location.protocol + \"//\" + window.location.host + window.location.pathname + \"?\" + params.toString();\r\n\t\t    window.history.pushState('test','',newUrl);\r\n\t    }\r\n\r\n\t    if(document.location.search.indexOf(\"mode\")<0){\r\n\r\n\t\t    params.set('mode',(optionMode.length > 0)?optionMode:'normal');\r\n\t\t    newUrl = window.location.protocol + \"//\" + window.location.host + window.location.pathname + \"?\" + params.toString();\r\n\t\t    window.history.pushState('test','',newUrl);\r\n\t    }\r\n\r\n\t  \t\r\n\t  \tif(oai_primary.length > 0){\r\n\r\n\t  \t\tthis.setState({\r\n\t            hasPrimaryId: true,\r\n\t        });\r\n\r\n\t        fetch(parserUrl+\"?oai_primary=\"+oai_primary)\r\n\t\t      .then(res => res.json())\r\n\t\t      .then(\r\n\t\t        (result) => {\r\n\r\n\t\t\t        \tvar mediaType = \"\";\r\n\t\t\t        \tvar mediaUrl = \"\";\r\n\r\n\t\t\t        \tif(result.audio !=null){\r\n\t\t\t        \t\tmediaType = \"audio\";\r\n\t\t\t        \t\tmediaUrl = result.audio;\r\n\t\t\t        \t}\r\n\t\t\t        \tif(result.video !=null){\r\n\t\t\t        \t\tmediaType = \"video\";\r\n\t\t\t        \t\tmediaUrl = result.video;\r\n\t\t\t        \t}\r\n\t\t\t        \t\r\n\r\n\t\t\t        \tthis.setState({\r\n\t\t\t\t            isMediaLoaded: true,\r\n\t\t\t\t            METADATA :  {\"data\":result.metadata},\r\n\t\t\t\t            MEDIAFILE : {\"type\":mediaType,\"url\":mediaUrl},\r\n\t\t\t\t            images : result.images\r\n\t\t\t\t          });\r\n\t\t\t        \r\n \r\n\t\t        },\r\n\t\t        // Remarque : il est important de traiter les erreurs ici\r\n\t\t        // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\r\n\t\t        // des exceptions provenant de réels bugs du composant.\r\n\t\t        (error) => {\r\n\t\t          console.log(error);\r\n\r\n\t\t        }\r\n\t\t      )\r\n\r\n\t  \t}\r\n\r\n\t  \tif(oai_secondary.length > 0){\r\n\r\n\t  \t\tthis.setState({\r\n\t            hasSecondaryId: true,\r\n\t        });\r\n\r\n\t  \t\tvar oai_secondary_url = parserUrl+\"?oai_secondary=\"+oai_secondary+\"&lang=\"+optionLang;\r\n\r\n\t        fetch(oai_secondary_url)\r\n\t\t    //fetch('https://eastling.huma-num.fr/player/parserFake.php?oai_secondary=EEE')\r\n\t\t      .then(res => res.json())\r\n\t\t      .then(\r\n\t\t        (result) => {\r\n\t\t        \tconsole.log(result);\r\n\t\t\t        if(result===null || (result.annotations[\"TEXT\"] === undefined && result.annotations[\"WORDLIST\"] === undefined )){\r\n\t\t\t        \tthis.setState({\r\n\t\t\t\t            isAnnotationsLoaded: true,\r\n\t\t\t\t            hasAnnotationsError:true,\r\n\t\t\t\t            annotationsError: \"No result\"\r\n\t\t\t\t          });\r\n\t\t\t        }else{\t\r\n\t\t\t        \t//27/08/2020 : options de langues\r\n\t\t\t        \tif(result.annotations.WORDLIST !== undefined && result.annotations.WORDLIST !== null){\r\n\t\t\t        \t\tvar isWordList = (result.annotations.WORDLIST.W !== undefined && result.annotations.WORDLIST.W !== null) ? true : false;\r\n\t\t\t        \t\twindow.isWordList = isWordList;\r\n\t\t\t        \t}\r\n\t\t\t        \t//console.log(typeof [result.typeOf.sentence.transcriptions[0]]);\r\n\t\t\t        \tthis.setState({\r\n\t\t\t        \t\tlangOptions: result.langues,\r\n\t\t\t        \t\toptions: result.typeOf,\r\n\t\t\t        \t\ttimeList: result.timeList,\r\n\t\t\t        \t\tdisplayOptions:{\r\n\t\t\t\t\t        \ttextTranscriptions : (document.location.search.indexOf(\"optionTextTranscriptions\") > 0) ? optionTextTranscriptions.split('+') : [],\r\n\t\t\t\t\t        \ttextTranslations : (document.location.search.indexOf(\"optionTextTranslations\") > 0) ? optionTextTranslations.split('+') : [],\r\n\t\t\t\t\t        \tsentenceTranscriptions : (document.location.search.indexOf(\"optionSentenceTranscriptions\") > 0) ? optionSentenceTranscriptions.split('+') : ((optionMode === \"pro\")?Array.from(result.typeOf.sentence.transcriptions):[result.typeOf.sentence.transcriptions[0]]),\r\n\t\t\t\t\t        \tsentenceTranslations : (document.location.search.indexOf(\"optionSentenceTranslations\") > 0) ? optionSentenceTranslations.split('+') : ((optionMode === \"pro\")?Array.from(result.typeOf.sentence.translations):[result.typeOf.sentence.translations[0]]),\r\n\t\t\t\t\t        \twordTranscriptions : (document.location.search.indexOf(\"optionWordTranscriptions\") > 0) ? optionWordTranscriptions.split('+') : ((optionMode === \"pro\")?Array.from(result.typeOf.word.transcriptions):(isWordList?[result.typeOf.word.transcriptions[0]]:[])),\r\n\t\t\t\t\t        \twordTranslations : (document.location.search.indexOf(\"optionWordTranslations\") > 0) ? optionWordTranslations.split('+') : ((optionMode === \"pro\")?Array.from(result.typeOf.word.translations):(isWordList?[result.typeOf.word.translations[0]]:[])),\r\n\t\t\t\t\t        \tmorphemeTranscriptions : (document.location.search.indexOf(\"optionMorphemeTranscriptions\") > 0) ? optionMorphemeTranscriptions.split('+') : ((optionMode === \"pro\")?Array.from(result.typeOf.morpheme.transcriptions):(isWordList?[result.typeOf.morpheme.transcriptions[0]]:[])),\r\n\t\t\t\t\t        \tmorphemeTranslations : (document.location.search.indexOf(\"optionMorphemeTranslations\") > 0) ? optionMorphemeTranslations.split('+') : ((optionMode === \"pro\")?Array.from(result.typeOf.morpheme.translations):(isWordList?[result.typeOf.morpheme.translations[0]]:[])),\r\n\t\t\t\t\t        \tnotes : (document.location.search.indexOf(\"optionNotes\") > 0) ? optionNotes.split('+') : [],\r\n\t\t\t\t\t        \tlang : (document.location.search.indexOf(\"lang\") > 0) ? optionLang : 'fr',\r\n\t\t\t\t\t        \tmode : (document.location.search.indexOf(\"mode\") > 0) ? optionMode : 'normal',\r\n\t\t\t\t\t        \tcontinuousPlay : (document.location.search.indexOf(\"continuousPlay\") > 0) ? optionContinuousPlay : false,\r\n\t\t\t        \t\t},\r\n\t\t\t\t            isAnnotationsLoaded: true,\r\n\t\t\t\t            annotations : result.annotations,\r\n\t\t\t\t            doi : result.doi,\r\n\t\t\t\t            isWordList : isWordList,\r\n\t\t\t\t            urlFile : result.urlFile,\r\n\t\t\t\t            extensionFile : result.extensionFile,\r\n\t\t\t\t            type: result.type,\r\n\t\t\t\t            format: result.format\r\n\t\t\t\t        });\r\n\r\n\t\t\t\t        if(anchor)\r\n\t\t\t\t        \t//window.scrollTo(0,document.querySelector(anchor).offsetTop - 180);\r\n\t\t\t\t        \tdocument.querySelector(anchor).scrollIntoView({block: \"center\"});\r\n\t\t\t        }\r\n\t\t\t        \r\n \r\n\t\t        },\r\n\t\t        // Remarque : il est important de traiter les erreurs ici\r\n\t\t        // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\r\n\t\t        // des exceptions provenant de réels bugs du composant.\r\n\t\t        (error) => {\r\n\t\t          console.log(error);\r\n\r\n\t\t        }\r\n\t\t      )\r\n\t  \t}\r\n\r\n\t  }\r\n\r\n\t  render(){\r\n\t  \treturn (\r\n\t\t    <div className=\"App\" key=\"App\">\t\r\n\t\t    \t{ \r\n\t\t    \t \tthis.state.hasPrimaryId\r\n\t\t    \t \t?\r\n\t\t    \t \t[\r\n\t\t    \t \tthis.state.isMediaLoaded \r\n\t\t    \t \t? \r\n\t\t    \t \t[\r\n\t\t    \t \tthis.state.hasMediaError \r\n\t\t    \t \t?\r\n\t\t    \t \t<Container>\r\n\t\t\t\t\t    <p>Error executing request to OAI-PMH:</p>\r\n\t\t\t\t\t    <p>Code :{this.state.mediaError.code}</p>\r\n\t\t\t\t\t    <p>Details :{this.state.mediaError.text}</p>\r\n\t\t\t    \t</Container>\r\n\t\t    \t \t:\r\n\t\t    \t \t<Container>\r\n\t\t\t\t\t    {/* <Metadata file={this.state.METADATA} /> */}\r\n\t\t\t\t\t    <Player file={this.state.MEDIAFILE} playerIsLoaded = {this.playerIsLoaded.bind(this)} />\r\n\r\n\t\t\t\t\t\t{ \r\n\t\t\t    \t \tthis.state.hasSecondaryId\r\n\t\t\t    \t \t?\r\n\t\t\t    \t \t[\r\n\t\t\t    \t \t(this.state.isAnnotationsLoaded && this.state.playerLoaded)\r\n\t\t\t    \t \t? \r\n\t\t\t    \t \t[\r\n\t\t\t    \t \tthis.state.hasAnnotationsError \r\n\t\t\t    \t \t?\r\n\t\t\t    \t \t<Container>\r\n\t\t\t\t\t\t    <p>Error getting annotations :</p>\r\n\t\t\t\t\t\t    <p>Code :{this.state.annotationsError.code}</p>\r\n\t\t\t\t\t\t    <p>Details :{this.state.annotationsError.text}</p>\r\n\t\t\t\t    \t</Container>\r\n\t\t\t    \t \t:\r\n\t\t\t    \t \t<div key={this.state.doi}>\r\n\t\t\t    \t \t<Container>\r\n\t\t\t\t\t\t    <DisplayOptions displayOptions={this.state.displayOptions} options={this.state.options} langOptions={this.state.langOptions} isWordList={this.state.isWordList} />\r\n\t\t\t\t    \t</Container>\r\n\t\t\t\t    \t<Container>\r\n\t \t\t\t\t\t\t<Annotations type={this.state.type} format={this.state.format} urlFile={this.state.urlFile} extensionFile={this.state.extensionFile} timeList={this.state.timeList} doi={this.state.doi} availableOptions={this.state.options} displayOptions={this.state.displayOptions} annotations={this.state.annotations} images={this.state.images} video={this.state.MEDIAFILE.type===\"video\"} />\r\n\t \t\t\t    \t</Container>\r\n\t \t\t\t    \t</div>\r\n\t\t\t\t    \t]\r\n\t\t\t\t    \t:\r\n\t\t\t\t    \t<CircularProgress key=\"CP primary\" />\r\n\t\t\t\t    \t]\r\n\t\t\t\t    \t:\r\n\t\t\t\t    \t<div>No Annotations</div>\r\n\t\t\t\t    }\r\n\r\n\t\t\t    \t</Container>\r\n\t\t\t    \t]\r\n\t\t\t    \t:\r\n\t\t\t    \t<CircularProgress key=\"CP secondary\" />\r\n\t\t\t    \t]\r\n\t\t\t    \t:\r\n\t\t\t    \tthis.props.annotations\r\n\t\t\t    \t?\r\n\t\t\t    \tthis.props.annotations\r\n\t\t\t    \t:\r\n\t\t\t    \t<div>No Media</div>\r\n\r\n\t\t\t    }\r\n\r\n\t\t\t    \r\n\t\t    </div>\r\n\t\t  );\r\n\t  }\r\n  \r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","// translation.js\r\n//https://github.com/amsul/react-translated#static-text\r\nexport default {\r\n  'Continuous play': {\r\n    en: 'Continuous play',\r\n    fr: 'Lecture en continu',\r\n  },'other': {\r\n    en: 'other',\r\n    fr: 'autre',\r\n  },'Text transcription': {\r\n    en: 'Text transcription',\r\n    fr: 'Transcription du texte',\r\n  },\r\n  'Display options': {\r\n    en: 'Display options',\r\n    fr: 'Options d\\'affichage',\r\n  },\r\n  'Text translation': {\r\n    en: 'Text translation',\r\n    fr: 'Traduction du texte',\r\n  },\r\n  'Sentence transcription': {\r\n    en: 'Sentence transcription',\r\n    fr: 'Transcription des phrases',\r\n  },\r\n  'Sentence translation': {\r\n    en: 'Sentence translation',\r\n    fr: 'Traduction des phrases',\r\n  },\r\n  'Word transcription': {\r\n    en: 'Word transcription',\r\n    fr: 'Transcription des mots',\r\n  },\r\n  'Word translation': {\r\n    en: 'Word translation',\r\n    fr: 'Traduction des mots',\r\n  },\r\n  'Morpheme transcription': {\r\n    en: 'Morpheme transcription',\r\n    fr: 'Transcription des morphèmes',\r\n  },\r\n  'Morpheme translation': {\r\n    en: 'Morpheme translation',\r\n    fr: 'Traduction des morphèmes',\r\n  },\r\n  'Words': {\r\n    en: 'Words',\r\n    fr: 'Mot à mot',\r\n  },\r\n  \r\n\r\n  // ...\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from 'react-translated';\r\nimport translation from './translation';\r\n\r\n\r\n\r\nvar lang = unescape(window.location.search.replace(new RegExp(\"^(?:.*[&\\\\?]\" + escape('lang').replace(/[\\.\\+\\*]/g, \"\\\\$&\") + \"(?:\\\\=([^&]*))?)?.*$\", \"i\"), \"$1\"));\t\r\nlang = (lang.length > 0) ? lang : 'fr';\r\n\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider language={lang} translation={translation}>\r\n    \t<App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();"],"sourceRoot":""}